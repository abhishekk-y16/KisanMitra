"use strict";exports.id=133,exports.ids=[133],exports.modules={7133:(e,s,a)=>{a.d(s,{D:()=>n});var t=a(997),r=a(6689),l=a(1365),i=a(6023);function n({onClose:e,inline:s=!1}){let[a,n]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),[c,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),[u,j]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!1),b=(0,r.useCallback)(async()=>{if(a){x(!0),h(null);try{let e=await fetch("http://localhost:8080/api/earth_engine_hazards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:a})});if(!e.ok)throw Error("Failed to fetch");let s=await e.json();d(s)}catch(e){console.error("Failed to fetch hazards:",e),h("Could not fetch weather data. Please try again.")}x(!1)}},[a]),g=e=>e<.2?{label:"Low",labelHi:"कम",variant:"success",description:"No immediate concerns"}:e<.5?{label:"Medium",labelHi:"मध्यम",variant:"warning",description:"Monitor conditions closely"}:{label:"High",labelHi:"उच्च",variant:"error",description:"Take precautionary measures"},f=({icon:e,label:s,labelHi:a,risk:r,gradient:l})=>{let n=g(r),o=Math.round(100*(r||0));return t.jsx(i.Zb,{className:"overflow-hidden",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${l}`,children:t.jsx("span",{className:"text-2xl",children:e})}),(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-semibold text-neutral-900",children:s}),t.jsx("p",{className:"text-sm text-neutral-500",children:a})]})]}),t.jsx(i.Ct,{variant:n.variant,size:"md",children:n.label})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-neutral-500",children:"Risk Level"}),(0,t.jsxs)("span",{className:"font-semibold text-neutral-900",children:[o,"%"]})]}),t.jsx("div",{className:"h-2.5 bg-neutral-100 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-500 ease-out ${"success"===n.variant?"bg-emerald-500":"warning"===n.variant?"bg-amber-500":"bg-red-500"}`,style:{width:`${Math.max(o,5)}%`}})}),t.jsx("p",{className:"text-xs text-neutral-400",children:n.description})]})]})})},N=o?(0,t.jsxs)(i.zx,{variant:"secondary",onClick:b,fullWidth:!0,children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]}):void 0,y=(0,t.jsxs)(t.Fragment,{children:[u?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})}),t.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Location Required"}),t.jsx("p",{className:"text-sm text-neutral-500 mb-6 max-w-xs mx-auto",children:"Please enable location access to view weather hazards for your area."}),t.jsx(i.zx,{variant:"primary",onClick:()=>window.location.reload(),children:"Enable Location"})]}):m?(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.bZ,{variant:"error",className:"mb-4",children:[m,t.jsx(i.zx,{variant:"secondary",size:"sm",onClick:b,className:"mt-3",children:"Try Again"})]}),t.jsx("p",{className:"text-xs text-neutral-400 text-center",children:"Data source: Google Earth Engine / IMD"})]}):c||!o?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(i.Od,{className:"w-12 h-12 rounded-2xl"}),(0,t.jsxs)("div",{children:[t.jsx(i.Od,{className:"h-4 w-32 mb-2"}),t.jsx(i.Od,{className:"h-3 w-20"})]})]}),t.jsx(i.Od.Card,{}),t.jsx(i.Od.Card,{})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[a&&(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-neutral-50 rounded-xl text-sm text-neutral-600",children:[t.jsx("svg",{className:"w-4 h-4 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),(0,t.jsxs)("span",{children:[a.lat.toFixed(4),"\xb0N, ",a.lng.toFixed(4),"\xb0E"]}),t.jsx(i.Ct,{variant:"secondary",size:"sm",className:"ml-auto",children:"14-day forecast"})]}),t.jsx("div",{children:a?process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY?(0,t.jsxs)("div",{className:"rounded-xl overflow-hidden border",children:[t.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${a.lat},${a.lng}`,target:"_blank",rel:"noreferrer",children:t.jsx("img",{alt:"Satellite preview",src:`https://maps.googleapis.com/maps/api/staticmap?center=${a.lat},${a.lng}&zoom=12&size=640x240&maptype=satellite&markers=color:0xFF0000%7C${a.lat},${a.lng}&key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}`,className:"w-full h-auto block"})}),t.jsx("p",{className:"text-xs text-neutral-400 p-2",children:"Satellite preview (Google Maps). Tap image to open full map."})]}):t.jsx(i.Zb,{className:"p-3 text-sm text-neutral-500",children:"Satellite preview not available — set NEXT_PUBLIC_GOOGLE_MAPS_API_KEY in your environment."}):null}),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(i.zx,{variant:"ghost",size:"sm",onClick:()=>v(!0),children:"Why am I seeing this?"})}),t.jsx(f,{icon:"\uD83C\uDF0A",label:"Flood Risk",labelHi:"बाढ़ जोखिम",risk:o.flood_risk,gradient:"bg-gradient-to-br from-blue-100 to-cyan-100"}),t.jsx(f,{icon:"☀️",label:"Drought Risk",labelHi:"सूखा जोखिम",risk:o.drought_risk,gradient:"bg-gradient-to-br from-orange-100 to-yellow-100"}),void 0!==o.frost_risk&&t.jsx(f,{icon:"❄️",label:"Frost Risk",labelHi:"पाला जोखिम",risk:o.frost_risk,gradient:"bg-gradient-to-br from-slate-100 to-blue-100"}),void 0!==o.heatwave_risk&&t.jsx(f,{icon:"\uD83D\uDD25",label:"Heatwave Risk",labelHi:"लू जोखिम",risk:o.heatwave_risk,gradient:"bg-gradient-to-br from-red-100 to-orange-100"}),o.recommendations&&o.recommendations.length>0&&t.jsx(i.Zb,{className:"bg-primary-50 border-primary-100",children:(0,t.jsxs)("div",{className:"p-4",children:[t.jsx("h4",{className:"font-semibold text-primary-800 flex items-center gap-2 mb-3",children:"Recommendations"}),t.jsx("ul",{className:"space-y-2",children:o.recommendations.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm text-primary-700",children:[t.jsx("span",{className:"text-primary-500 mt-0.5",children:"•"}),e]},s))})]})}),t.jsx("p",{className:"text-xs text-neutral-400 text-center",children:"Data source: Google Earth Engine / IMD"})]}),p&&t.jsx(l.u,{title:"Why these hazards?",subtitle:"Explanation",onClose:()=>v(!1),children:(0,t.jsxs)("div",{className:"p-3 space-y-3 text-sm text-neutral-700",children:[t.jsx("p",{children:"The hazard scores are computed from recent satellite-derived indicators (soil moisture, river inundation indices, and vegetation stress) and meteorological forecasts. We combine these to estimate short-term flood and drought risk for your location."}),t.jsx("p",{children:"Flood risk increases after heavy rainfall or rising river levels; drought risk rises when precipitation and soil moisture are below normal. These are probabilistic estimates — use local observations alongside advisories."}),t.jsx("p",{className:"text-xs text-neutral-400",children:"Data sources: Google Earth Engine (satellite imagery), IMD forecasts."})]})})]});return s?(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-xl font-bold",children:"Weather Hazards"}),t.jsx("p",{className:"text-sm text-neutral-500",children:"मौसम चेतावनी"})]})}),t.jsx("div",{className:"space-y-4",children:y}),t.jsx("div",{className:"mt-4",children:N})]}):t.jsx(l.u,{title:"Weather Hazards",subtitle:"मौसम चेतावनी",onClose:e??(()=>{}),footer:N,children:y})}}};