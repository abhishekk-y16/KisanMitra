(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{3454:function(e,t,s){"use strict";var a,i;e.exports=(null==(a=s.g.process)?void 0:a.env)&&"object"==typeof(null==(i=s.g.process)?void 0:i.env)?s.g.process:s(7663)},2537:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/weather",function(){return s(70)}])},6498:function(e,t,s){"use strict";s.d(t,{u:function(){return l}});var a=s(5893),i=s(7294);function l(e){let{title:t,subtitle:s,children:l,onClose:n,footer:r,size:o="md"}=e,c=(0,i.useCallback)(e=>{"Escape"===e.key&&n()},[n]);return(0,i.useEffect)(()=>(document.addEventListener("keydown",c),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}),[c]),(0,a.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-neutral-900/50 backdrop-blur-sm animate-fade-in",onClick:n,"aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 md:p-8",children:(0,a.jsxs)("div",{className:"\n            relative w-full ".concat({sm:"max-w-md",md:"max-w-xl",lg:"max-w-3xl",xl:"max-w-5xl"}[o],"\n            bg-white\n            rounded-2xl\n            shadow-2xl\n            max-h-[90vh]\n            overflow-hidden\n            flex flex-col\n            animate-scale-in\n          "),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 px-6 py-4 border-b border-neutral-100 bg-white",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h2",{id:"modal-title",className:"text-xl font-bold text-neutral-900",children:t}),s&&(0,a.jsx)("p",{className:"text-sm text-neutral-500 mt-0.5",children:s})]}),(0,a.jsx)("button",{onClick:n,className:"   flex-shrink-0 w-10 h-10   flex items-center justify-center   rounded-full   text-neutral-500 bg-neutral-100   hover:bg-neutral-200 hover:text-neutral-700   transition-colors duration-200   focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500   ","aria-label":"Close dialog",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:l}),r&&(0,a.jsx)("div",{className:"sticky bottom-0 px-6 py-4 border-t border-neutral-100 bg-neutral-50",children:r})]})})]})}},70:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(5893),i=s(7294),l=s(6498),n=s(7342),r=s(3454);function o(e){var t,s,o;let{onClose:c,inline:d=!1}=e,[u,x]=(0,i.useState)(null),[m,h]=(0,i.useState)(null),[v,p]=(0,i.useState)(null),[f,j]=(0,i.useState)(null),[g,y]=(0,i.useState)(!0),[N,b]=(0,i.useState)(null),[w,k]=(0,i.useState)(!1),[C,T]=(0,i.useState)(!1);(0,i.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>x({lat:e.coords.latitude,lng:e.coords.longitude}),()=>{k(!0),y(!1)},{timeout:1e4,maximumAge:3e5}):(k(!0),y(!1))},[]),(0,i.useEffect)(()=>{let e=!0;return async function(){if(!u){h(null);return}try{let t="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(u.lat,"&lon=").concat(u.lng),s=await fetch(t,{headers:{Accept:"application/json","User-Agent":"KisanBuddy/1.0 (dev)"}});if(!e)return;if(!s.ok){h(null);return}let a=await s.json(),i=a.display_name||a.name||null;h(i)}catch(e){h(null)}}(),()=>{e=!1}},[u]);let _=(0,i.useCallback)(async()=>{if(u){y(!0),b(null);try{let e="http://127.0.0.1:8000",t=await fetch("".concat(e,"/api/earth_engine_hazards"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:u})});if(t.ok){let e=await t.json();p(e)}else{let e=await t.text();console.warn("Earth Engine hazards fetch failed:",t.status,e)}let s=await fetch("".concat(e,"/api/weather_forecast"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:u})});if(!s.ok){let e=await s.text();throw Error("Server error fetching forecast: ".concat(s.status," ").concat(e))}let a=await s.json();j(a.forecast||a)}catch(e){console.error("Failed to fetch hazards:",e),b(e instanceof Error?e.message:"Could not fetch weather data. Please try again.")}y(!1)}},[u]);(0,i.useEffect)(()=>{u&&_()},[u,_]);let S=e=>e<.2?{label:"Low",labelHi:"कम",variant:"success",description:"No immediate concerns"}:e<.5?{label:"Medium",labelHi:"मध्यम",variant:"warning",description:"Monitor conditions closely"}:{label:"High",labelHi:"उच्च",variant:"error",description:"Take precautionary measures"},E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==e)return t;let s=Number(e);return Number.isFinite(s)?s:t};function L(e,t){if(null==e)return"—";let s=Math.abs(Number(e)).toFixed(4);return"lat"===t?"".concat(s,"\xb0").concat(e>=0?"N":"S"):"".concat(s,"\xb0").concat(e>=0?"E":"W")}let M=e=>{let{icon:t,label:s,labelHi:i,risk:l,gradient:r}=e,o=S(l),c=Math.round(100*(l||0));return(0,a.jsx)(n.Zb,{className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center ".concat(r),children:(0,a.jsx)("span",{className:"text-2xl",children:t})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-neutral-900",children:s}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:i})]})]}),(0,a.jsx)(n.Ct,{variant:o.variant,size:"md",children:o.label})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Risk Level"}),(0,a.jsxs)("span",{className:"font-semibold text-neutral-900",children:[c,"%"]})]}),(0,a.jsx)("div",{className:"h-2.5 bg-neutral-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ease-out ".concat("success"===o.variant?"bg-emerald-500":"warning"===o.variant?"bg-amber-500":"bg-red-500"),style:{width:"".concat(Math.max(c,5),"%")}})}),(0,a.jsx)("p",{className:"text-xs text-neutral-400",children:o.description})]})]})})},O=v?(0,a.jsxs)(n.zx,{variant:"secondary",onClick:_,fullWidth:!0,children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]}):void 0,z=(0,a.jsxs)(a.Fragment,{children:[w?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Location Required"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500 mb-6 max-w-xs mx-auto",children:"Please enable location access to view weather hazards for your area."}),(0,a.jsx)(n.zx,{variant:"primary",onClick:()=>window.location.reload(),children:"Enable Location"})]}):N?(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.bZ,{variant:"error",className:"mb-4",children:[N,(0,a.jsx)(n.zx,{variant:"secondary",size:"sm",onClick:_,className:"mt-3",children:"Try Again"})]}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 text-center",children:"Data source: Google Earth Engine / IMD"})]}):g||!v?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(n.Od,{className:"w-12 h-12 rounded-2xl"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Od,{className:"h-4 w-32 mb-2"}),(0,a.jsx)(n.Od,{className:"h-3 w-20"})]})]}),(0,a.jsx)(n.Od.Card,{}),(0,a.jsx)(n.Od.Card,{})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[u&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-neutral-50 rounded-xl text-sm text-neutral-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-neutral-800",children:[m?"".concat(m," — "):"",L(u.lat,"lat"),", ",L(u.lng,"lng")]}),f&&(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:(e=>{var t,s;if(!(null==e?void 0:e.current))return"";let a=E(e.current.temp,null),i=E(e.current.feels_like,null),l=E(e.current.humidity,null),n=E(e.current.wind_speed,null),r=(null===(s=e.current.weather)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.description)||"",o=[];return null!==a&&o.push("".concat(Math.round(a),"\xb0C")),r&&o.push(r),null!==i&&o.push("Feels like ".concat(Math.round(i),"\xb0C")),null!==l&&o.push("Humidity: ".concat(l,"%")),null!==n&&o.push("Wind: ".concat(Math.round(n)," m/s")),o.join(" • ")})(f)})]}),(0,a.jsx)(n.Ct,{variant:"secondary",size:"sm",className:"ml-auto",children:"14-day forecast"})]}),(0,a.jsx)("div",{children:u?r.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY?(0,a.jsxs)("div",{className:"rounded-xl overflow-hidden border",children:[(0,a.jsx)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(u.lat,",").concat(u.lng),target:"_blank",rel:"noreferrer",children:(0,a.jsx)("img",{alt:"Satellite preview",src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(u.lat,",").concat(u.lng,"&zoom=12&size=640x240&maptype=satellite&markers=color:0xFF0000%7C").concat(u.lat,",").concat(u.lng,"&key=").concat(r.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY),className:"w-full h-auto block"})}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 p-2",children:"Satellite preview (Google Maps). Tap image to open full map."})]}):(0,a.jsx)(n.Zb,{className:"p-3 text-sm text-neutral-500",children:"Satellite preview not available — set NEXT_PUBLIC_GOOGLE_MAPS_API_KEY in your environment."}):null}),(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)(n.zx,{variant:"ghost",size:"sm",onClick:()=>T(!0),children:"Why am I seeing this?"})}),f&&(0,a.jsx)(n.Zb,{className:"mt-4",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Current Conditions"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"text-3xl",children:(e=>{var t;let s=E(null==e?void 0:null===(t=e.current)||void 0===t?void 0:t.temp,null);return null===s?"—":"".concat(Math.round(s),"\xb0C")})(f)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-neutral-600",children:null!==E(null==f?void 0:null===(t=f.current)||void 0===t?void 0:t.feels_like)?"Feels like ".concat(Math.round(Number(f.current.feels_like)),"\xb0C"):""}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500",children:[null!==E(null==f?void 0:null===(s=f.current)||void 0===s?void 0:s.humidity)?"Humidity: ".concat(Math.round(Number(f.current.humidity)),"%"):"",null!==E(null==f?void 0:null===(o=f.current)||void 0===o?void 0:o.wind_speed)?" • Wind: ".concat(Math.round(Number(f.current.wind_speed))," m/s"):""]})]})]})]})}),(0,a.jsx)(M,{icon:"\uD83C\uDF0A",label:"Flood Risk",labelHi:"बाढ़ जोखिम",risk:v.flood_risk,gradient:"bg-gradient-to-br from-blue-100 to-cyan-100"}),(0,a.jsx)(M,{icon:"☀️",label:"Drought Risk",labelHi:"सूखा जोखिम",risk:v.drought_risk,gradient:"bg-gradient-to-br from-orange-100 to-yellow-100"}),void 0!==v.frost_risk&&(0,a.jsx)(M,{icon:"❄️",label:"Frost Risk",labelHi:"पाला जोखिम",risk:v.frost_risk,gradient:"bg-gradient-to-br from-slate-100 to-blue-100"}),void 0!==v.heatwave_risk&&(0,a.jsx)(M,{icon:"\uD83D\uDD25",label:"Heatwave Risk",labelHi:"लू जोखिम",risk:v.heatwave_risk,gradient:"bg-gradient-to-br from-red-100 to-orange-100"}),v.recommendations&&v.recommendations.length>0&&(0,a.jsx)(n.Zb,{className:"bg-primary-50 border-primary-100",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-primary-800 flex items-center gap-2 mb-3",children:"Recommendations"}),(0,a.jsx)("ul",{className:"space-y-2",children:v.recommendations.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm text-primary-700",children:[(0,a.jsx)("span",{className:"text-primary-500 mt-0.5",children:"•"}),e]},t))})]})}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 text-center",children:"Data source: Google Earth Engine / IMD"})]}),C&&(0,a.jsx)(l.u,{title:"Why these hazards?",subtitle:"Explanation",onClose:()=>T(!1),children:(0,a.jsxs)("div",{className:"p-3 space-y-3 text-sm text-neutral-700",children:[(0,a.jsx)("p",{children:"The hazard scores are computed from recent satellite-derived indicators (soil moisture, river inundation indices, and vegetation stress) and meteorological forecasts. We combine these to estimate short-term flood and drought risk for your location."}),(0,a.jsx)("p",{children:"Flood risk increases after heavy rainfall or rising river levels; drought risk rises when precipitation and soil moisture are below normal. These are probabilistic estimates — use local observations alongside advisories."}),(0,a.jsx)("p",{className:"text-xs text-neutral-400",children:"Data sources: Google Earth Engine (satellite imagery), IMD forecasts."})]})})]});return d?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Weather Hazards"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"मौसम चेतावनी"})]})}),(0,a.jsx)("div",{className:"space-y-4",children:z}),(0,a.jsx)("div",{className:"mt-4",children:O})]}):(0,a.jsx)(l.u,{title:"Weather Hazards",subtitle:"मौसम चेतावनी",onClose:null!=c?c:()=>{},footer:O,children:z})}var c=s(4582),d=s(530),u=s(7334);function x(e){let{item:t,onSelect:s}=e;return(0,a.jsx)("button",{onClick:()=>s(t),className:"focus:outline-none","aria-label":"Select ".concat(t.day," forecast"),children:(0,a.jsx)(c.Z,{variant:"elevated",padding:"sm",className:"w-full sm:w-44 hover:shadow-lg transition rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 text-3xl",children:t.icon}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-neutral-700",children:t.day}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500 mt-1",children:[t.hi,"\xb0 / ",t.lo,"\xb0 • ☔ ",t.rain,"%"]})]})]})})})}function m(){var e,t,s;let l=[{day:"Today",icon:"\uD83C\uDF27️",hi:30,lo:22,rain:70,advisory:"High winds + water logging predicted — secure support."},{day:"Tue",icon:"⛅",hi:31,lo:23,rain:20,advisory:"Light showers — safe to spray in dry windows."},{day:"Wed",icon:"☀️",hi:33,lo:24,rain:5,advisory:"Sunny — ideal for foliar feeding."},{day:"Thu",icon:"\uD83C\uDF26️",hi:29,lo:21,rain:55,advisory:"Heavy showers likely — delay fertilizer application."},{day:"Fri",icon:"\uD83C\uDF27️",hi:28,lo:20,rain:80,advisory:"Persistent rain — check drainage and stored seed."},{day:"Sat",icon:"⛈️",hi:27,lo:19,rain:85,advisory:"Thunderstorms — secure greenhouse panels."},{day:"Sun",icon:"☀️",hi:32,lo:22,rain:10,advisory:"Clear — plan field operations."}],[n,r]=(0,i.useState)(l),[m,h]=(0,i.useState)(!1),[v,p]=(0,i.useState)(null),[f,j]=(0,i.useState)(null),[g,y]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=!0;return h(!0),async function(){try{var t,s;let a=null;"undefined"!=typeof navigator&&navigator.geolocation?(a=await new Promise(e=>{try{navigator.geolocation.getCurrentPosition(t=>e({lat:t.coords.latitude,lng:t.coords.longitude}),()=>e(null),{timeout:5e3})}catch(t){e(null)}}))||y("Geolocation not available or permission denied; using sample location."):y("Geolocation not supported by this browser; using sample data.");let i=await fetch("".concat("http://127.0.0.1:8000","/api/weather_forecast"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:a})});if(!i.ok){let e=await i.text().catch(()=>"");throw 401===i.status||e.toLowerCase().includes("unauthorized")?y("Weather service unauthorized (missing API key)."):405===i.status&&y("Weather API not accepting POST requests (405)."),Error("Status ".concat(i.status," ").concat(e))}let n=await i.json(),o=null!==(s=null!==(t=null==n?void 0:n.daily)&&void 0!==t?t:n)&&void 0!==s?s:[];if(Array.isArray(o)&&e){let e=o.slice(0,7).map((e,t)=>{var s,a,i,l,n,r,o,c,d,u,x,m,h,v,p,f,j,g;return{day:null!==(o=null!==(r=null!==(n=e.day)&&void 0!==n?n:e.dt_txt)&&void 0!==r?r:["Today","Tue","Wed","Thu","Fri","Sat","Sun"][t])&&void 0!==o?o:"Day ".concat(t+1),icon:null!==(d=null!==(c=e.icon)&&void 0!==c?c:e.weather&&e.weather[0]&&e.weather[0].emoji)&&void 0!==d?d:"\uD83C\uDF24️",hi:null!==(m=null!==(u=e.hi)&&void 0!==u?u:null===(s=e.temp)||void 0===s?void 0:s.max)&&void 0!==m?m:Math.round(null!==(x=null===(a=e.temp)||void 0===a?void 0:a.day)&&void 0!==x?x:30),lo:null!==(p=null!==(h=e.lo)&&void 0!==h?h:null===(i=e.temp)||void 0===i?void 0:i.min)&&void 0!==p?p:Math.round(null!==(v=null===(l=e.temp)||void 0===l?void 0:l.night)&&void 0!==v?v:20),rain:null!==(j=e.rain)&&void 0!==j?j:Math.round((null!==(f=e.pop)&&void 0!==f?f:0)*100),advisory:null!==(g=e.advisory)&&void 0!==g?g:void 0}});r(e.length?e:l)}else e&&r(l);e&&p(null)}catch(s){if(!e)return;let t=(null==s?void 0:s.message)||String(s);t.includes("405")&&y("Weather API not accepting POST requests (405)."),p("Could not load forecast (".concat(t,")")),r(l)}finally{e&&h(!1)}}(),()=>{e=!1}},[]),(0,a.jsx)("div",{className:"min-h-screen bg-surface-50 py-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-extrabold text-neutral-900",children:"Weather & Impact Forecast"}),(0,a.jsx)("p",{className:"text-sm md:text-base text-neutral-500 mt-1 max-w-xl",children:"Impact-Based Weather (IBF) tailored to your crops, crop stage and local risks — tactical guidance for the next 7–14 days."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Z,{variant:"ghost",onClick:()=>window.open("/diagnostic","_self"),children:"Diagnostics"}),(0,a.jsx)(d.Z,{onClick:()=>window.location.reload(),children:"Refresh"})]})]}),g&&(0,a.jsx)(u.b,{variant:"warning",title:"Service",className:"mb-4",children:g}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsxs)("main",{className:"col-span-12 lg:col-span-8",children:[(0,a.jsxs)(c.Z,{variant:"glass",padding:"lg",children:[(0,a.jsx)(c.O,{title:"Local Weather Snapshot",subtitle:"Tap a day for micro-advisories"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(o,{inline:!0})}),(0,a.jsxs)("div",{className:"rounded-md bg-white/40 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-neutral-700",children:"7-Day Forecast"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:m?"Updating…":v?"Using sample data":"Live"})]}),v&&(0,a.jsx)("div",{className:"text-sm text-red-600 mt-2",children:v}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("div",{className:"flex gap-3 overflow-x-auto py-1",children:n.slice(0,7).map((e,t)=>(0,a.jsx)("div",{className:"min-w-[10rem]",children:(0,a.jsx)(x,{item:e,onSelect:e=>j(e)})},t))})})]}),f&&(0,a.jsxs)(c.Z,{className:"mt-4",children:[(0,a.jsx)(c.O,{title:"Advisory — ".concat(f.day),subtitle:"".concat(f.hi,"\xb0 / ").concat(f.lo,"\xb0 • ☔ ").concat(f.rain,"%")}),(0,a.jsx)("div",{className:"p-3 text-sm text-neutral-700",children:(0,a.jsx)("p",{children:null!==(s=f.advisory)&&void 0!==s?s:"No specific advisory — monitor conditions and follow IBF guidelines."})})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(c.O,{title:"Key Metrics",subtitle:"Quick glance"}),(0,a.jsxs)("div",{className:"p-3 text-sm text-neutral-700 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Temp (now)"}),(0,a.jsxs)("div",{className:"font-semibold",children:[null===(e=n[0])||void 0===e?void 0:e.hi,"\xb0"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Precip. Chance"}),(0,a.jsxs)("div",{className:"font-semibold",children:[null===(t=n[0])||void 0===t?void 0:t.rain,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Advisory"}),(0,a.jsx)("div",{className:"text-sm text-neutral-600",children:f?"Selected day":"Tap a day"})]})]})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(c.O,{title:"Micro-Advisory",subtitle:"Tomato — Vegetative"}),(0,a.jsx)("div",{className:"p-3 text-sm text-neutral-700",children:(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,a.jsx)("li",{children:"High winds + water logging predicted on Thu — secure support for vines."}),(0,a.jsx)("li",{children:"Delay fertilizer application if rain > 20mm expected within 24h."}),(0,a.jsx)("li",{children:"Consider mulching if heavy rain forecast to reduce seed displacement."})]})})]})]})})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(c.O,{title:"Impact Matrix",subtitle:"Nominal vs Effective Prices"}),(0,a.jsxs)("div",{className:"p-3 text-sm text-neutral-700",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 mb-2",children:"Distance-adjusted mandi choices help avoid transport losses."}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"text-neutral-500 text-xs",children:"Nearest Mandi"}),(0,a.jsx)("div",{className:"font-semibold",children:"Amritsar"}),(0,a.jsx)("div",{className:"text-xs text-neutral-400",children:"Modal: ₹2,200 / Effective: ₹2,140"})]})})]})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(c.O,{title:"Quick Tips",subtitle:"What to do now"}),(0,a.jsx)("div",{className:"p-3 text-sm text-neutral-700",children:(0,a.jsxs)("ol",{className:"list-decimal pl-5 space-y-2",children:[(0,a.jsx)("li",{children:"Monitor soil moisture sensors after heavy rain."}),(0,a.jsx)("li",{children:"Delay spray operations during active precipitation windows."}),(0,a.jsx)("li",{children:"Use rope supports for high-value fruiting plants before forecasted gusts."})]})})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(c.O,{title:"Field Checklist",subtitle:"Pre/post event"}),(0,a.jsx)("div",{className:"p-3 text-sm text-neutral-700",children:(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{className:"text-xs",children:"Check drainage channels after heavy rain."}),(0,a.jsx)("li",{className:"text-xs",children:"Secure coverings before predicted gusts."}),(0,a.jsx)("li",{className:"text-xs",children:"Record crop stage for advisory accuracy."})]})})]})]})]}),(0,a.jsxs)("aside",{className:"col-span-12 lg:col-span-4",children:[(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(c.O,{title:"Alerts & Advisories",subtitle:"Impact-Based Warnings"}),(0,a.jsxs)("div",{className:"p-3 text-sm text-neutral-700 space-y-3",children:[(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-100 p-3 rounded",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Flood Watch — 48h"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Localized river rise expected — secure stored seed."})]}),(0,a.jsxs)("div",{className:"bg-red-50 border border-red-100 p-3 rounded",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Heat Alert — 3 days"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Shade and extra irrigation recommended for seedlings."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-sm font-semibold mt-2",children:"Why this matters"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"IBF maps weather hazards to crop stage to provide tactical guidance (e.g., suspend fertilizer when rain > 30mm during sowing)."})]})]})]}),(0,a.jsxs)(c.Z,{className:"mt-4",children:[(0,a.jsx)(c.O,{title:"Local Resources",subtitle:"Contacts & Help"}),(0,a.jsxs)("div",{className:"p-3 text-sm text-neutral-700",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Krishi Vigyan Kendra: +91-11-XXXX-XXXX"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:"Nearest mandi updates and transport tips are shown in Market tab."})]})]})]})]})]})})}},7663:function(e){!function(){var t={229:function(e){var t,s,a,i=e.exports={};function l(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function r(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{s="function"==typeof clearTimeout?clearTimeout:n}catch(e){s=n}}();var o=[],c=!1,d=-1;function u(){c&&a&&(c=!1,a.length?o=a.concat(o):d=-1,o.length&&x())}function x(){if(!c){var e=r(u);c=!0;for(var t=o.length;t;){for(a=o,o=[];++d<t;)a&&a[d].run();d=-1,t=o.length}a=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===n||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new m(e,t)),1!==o.length||c||r(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var l=s[e]={exports:{}},n=!0;try{t[e](l,l.exports,a),n=!1}finally{n&&delete s[e]}return l.exports}a.ab="//";var i=a(229);e.exports=i}()}},function(e){e.O(0,[342,888,774,179],function(){return e(e.s=2537)}),_N_E=e.O()}]);