"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{8247:function(e,s,r){r.d(s,{X:function(){return c}});var a=r(5893),t=r(7294),n=r(6498),l=r(3878);let i=[{name:"Wheat",hindi:"गेहूं",icon:"\uD83C\uDF3E",color:"bg-amber-50 hover:bg-amber-100 border-amber-200"},{name:"Rice",hindi:"चावल",icon:"\uD83C\uDF5A",color:"bg-slate-50 hover:bg-slate-100 border-slate-200"},{name:"Tomato",hindi:"टमाटर",icon:"\uD83C\uDF45",color:"bg-red-50 hover:bg-red-100 border-red-200"},{name:"Onion",hindi:"प्याज",icon:"\uD83E\uDDC5",color:"bg-purple-50 hover:bg-purple-100 border-purple-200"},{name:"Potato",hindi:"आलू",icon:"\uD83E\uDD54",color:"bg-yellow-50 hover:bg-yellow-100 border-yellow-200"},{name:"Cotton",hindi:"कपास",icon:"☁️",color:"bg-sky-50 hover:bg-sky-100 border-sky-200"}];function c(e){let{onClose:s,inline:r=!1}=e,[c,o]=(0,t.useState)(null),[d,x]=(0,t.useState)(null),[m,h]=(0,t.useState)(!1),[p,u]=(0,t.useState)(null),b=async e=>{o(e),h(!0),u(null);try{let s=await fetch("".concat("https://kisanmitra-coge.onrender.com","/api/agmarknet_proactive"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commodity:e.name})});if(!s.ok){let e=await s.text().catch(()=>null);try{let s=e?JSON.parse(e):null,r=(null==s?void 0:s.detail)||(null==s?void 0:s.message)||e;console.error("Server error fetching prices:",r),u(r||"Could not fetch prices. Please try again.")}catch(s){console.error("Server error fetching prices:",e),u(e||"Could not fetch prices. Please try again.")}h(!1);return}let r=await s.json();x(r)}catch(e){console.error("Failed to fetch prices:",e),u("Could not fetch prices. Please try again.")}h(!1)},j=c?(0,a.jsx)(l.zx,{variant:"secondary",onClick:()=>{o(null),x(null),u(null)},fullWidth:!0,icon:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),children:"Back to Crops | वापस"}):void 0,v=(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsx)(l.bZ,{variant:"error",className:"mb-4",onDismiss:()=>u(null),children:p}),c?m?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("span",{className:"text-4xl",children:c.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Od,{className:"h-6 w-24 mb-1"}),(0,a.jsx)(l.Od,{className:"h-4 w-32"})]})]}),(0,a.jsx)(l.Od.Card,{}),(0,a.jsx)(l.Od.Card,{})]}):d?(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 flex items-center justify-center rounded-2xl ".concat(c.color.split(" ")[0]),children:(0,a.jsx)("span",{className:"text-3xl",children:c.icon})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900",children:c.hindi}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500",children:[c.name," prices across India"]})]}),d.trend&&(0,a.jsxs)(l.Ct,{variant:"up"===d.trend?"success":"down"===d.trend?"error":"secondary",size:"md",children:[(e=>{switch(e){case"up":return(0,a.jsx)("span",{className:"text-emerald-500",children:"↑"});case"down":return(0,a.jsx)("span",{className:"text-red-500",children:"↓"});default:return(0,a.jsx)("span",{className:"text-neutral-400",children:"→"})}})(d.trend)," ","up"===d.trend?"Rising":"down"===d.trend?"Falling":"Stable"]})]}),d.prices&&d.prices.length>0&&(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-neutral-100",children:(0,a.jsxs)("h4",{className:"font-semibold text-neutral-800 flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Recent Market Prices"]})}),(0,a.jsx)("div",{className:"divide-y divide-neutral-50",children:d.prices.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-neutral-50 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-neutral-800",children:e.city}),e.min_price&&e.max_price&&(0,a.jsxs)("span",{className:"text-xs text-neutral-400 block",children:["Range: ₹",e.min_price," - ₹",e.max_price]})]}),(0,a.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:["₹",e.modal_price,(0,a.jsx)("span",{className:"text-sm font-normal text-neutral-400",children:"/q"})]})]},s))})]}),d.forecast&&d.forecast.length>0&&(0,a.jsxs)(l.Zb,{className:"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-100",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-amber-100",children:(0,a.jsxs)("h4",{className:"font-semibold text-amber-800 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"14-Day Price Forecast"]})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1 snap-x",children:d.forecast.map((e,s)=>(0,a.jsxs)("div",{className:"flex-shrink-0 bg-white/80 backdrop-blur rounded-xl px-3 py-2 text-center min-w-[70px] snap-start border border-amber-100/50",children:[(0,a.jsx)("span",{className:"text-xs text-amber-600 block mb-0.5",children:e.date}),(0,a.jsxs)("span",{className:"font-bold text-amber-900",children:["₹",Math.round(e.modal_price)]})]},s))})})]}),d.lastUpdated&&(0,a.jsxs)("p",{className:"text-xs text-neutral-400 text-center",children:["Last updated: ",d.lastUpdated]})]}):null:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Select a crop to view current market prices and 14-day forecast"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:i.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>b(e),className:"\n                  group relative p-4 rounded-2xl border\n                  ".concat(e.color,"\n                  text-center transition-all duration-200\n                  hover:shadow-md hover:-translate-y-0.5\n                  active:scale-[0.98]\n                  focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500\n                "),style:{animationDelay:"".concat(50*s,"ms")},children:[(0,a.jsx)("span",{className:"block text-3xl mb-2 transition-transform duration-200 group-hover:scale-110",children:e.icon}),(0,a.jsx)("span",{className:"block font-semibold text-neutral-900",children:e.hindi}),(0,a.jsx)("span",{className:"block text-xs text-neutral-500",children:e.name})]},e.name))}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-neutral-400 pt-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Data from CEDA Ashoka / Agmarknet"]})]})]});return r?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Market Prices"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:"मंडी भाव"})]}),v]}):(0,a.jsx)(n.u,{title:"Market Prices",subtitle:"मंडी भाव",onClose:null!=s?s:()=>{},footer:j,size:"lg",children:v})}}}]);